"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e,t,s;const n=exports.Emile;function a(e){const t=e.closest(".field"),s=`${t.querySelector('select[name="fontAwesomeIconClass-style"]').value} fa-${t.querySelector('input[name="fontAwesomeIconClass-className').value}`;t.querySelector(".icon").innerHTML=`<i class="${s}" aria-hidden="true"></i>`}function o(e){const t=e.currentTarget;t.closest(".field").querySelector('input[name="fontAwesomeIconClass-className"]').setAttribute("list",`datalist--iconClasses-${t.value}`),a(t)}function r(e){a(e.currentTarget)}let l=exports.assetCategories;function c(e){e.preventDefault(),cityssm.postJSON(`${n.urlPrefix}/admin/doUpdateAssetCategory`,e.currentTarget,e=>{var t;const s=e;s.success?(bulmaJS.alert({message:"Category updated successfully.",contextualColorName:"success"}),l=s.assetCategories,u()):bulmaJS.alert({title:"Error Updating Category",message:null!==(t=s.errorMessage)&&void 0!==t?t:"Please try again.",contextualColorName:"danger"})})}function i(e){const t=e.currentTarget,s=t.closest("tr"),a=null==s?void 0:s.dataset.categoryId;cityssm.postJSON(`${n.urlPrefix}/admin/${"up"===t.dataset.direction?"doMoveAssetCategoryUp":"doMoveAssetCategoryDown"}`,{categoryId:a,moveToEnd:e.shiftKey?"1":"0"},e=>{var t;const s=e;s.success?(l=s.assetCategories,u()):bulmaJS.alert({title:"Error Moving Category",message:null!==(t=s.errorMessage)&&void 0!==t?t:"Please try again.",contextualColorName:"danger"})})}function d(e){var t;const s=null===(t=e.currentTarget.closest("tr"))||void 0===t?void 0:t.dataset.categoryId;bulmaJS.confirm({title:"Delete Asset Category",message:"Are you sure you want to delete this category?",contextualColorName:"warning",okButton:{text:"Yes, Delete Category",callbackFunction:function(){cityssm.postJSON(`${n.urlPrefix}/admin/doDeleteAssetCategory`,{categoryId:s},e=>{var t;const s=e;s.success?(bulmaJS.alert({message:"Category deleted successfully.",contextualColorName:"success"}),l=s.assetCategories,u()):bulmaJS.alert({title:"Error Deleting Category",message:null!==(t=s.errorMessage)&&void 0!==t?t:"Please try again.",contextualColorName:"danger"})})}}})}function u(){var e,t,s,n;const u=document.querySelector("#tbody--assetCategories");u.innerHTML="";for(const m of l){const l=document.createElement("tr");l.dataset.categoryId=m.categoryId.toString();const y=null!==(t=null===(e=m.fontAwesomeIconClasses)||void 0===e?void 0:e.split(" "))&&void 0!==t?t:["fas","fa-bolt"],g=`form--assetCategory-${m.categoryId}`;l.innerHTML=`<td>\n          <div class="field">\n            <div class="control">\n              <input class="input" name="category" form="${g}" placeholder="Category Name" maxlength="100" required />\n            </div>\n          </div>\n        </td>\n        <td>\n          <div class="field has-addons">\n            <div class="control">\n              <div class="select">\n                <select name="fontAwesomeIconClass-style" form="${g}" required>\n                  <option value="fas">Solid</option>\n                  <option value="far">Regular</option>\n                </select>\n              </div>\n            </div>\n            <div class="control is-expanded">\n              <input class="input" name="fontAwesomeIconClass-className" form="${g}" list="datalist--iconClasses-${y[0]}" maxlength="43" required />\n            </div>\n            <div class="control">\n              <span class="button is-static">\n                <span class="icon"></span>\n              </span>\n            </div>\n          </div>\n        </td>\n        <td class="has-width-10">\n          <form id="${g}">\n            <input name="categoryId" type="hidden" value="${m.categoryId}" />\n            <button class="button is-success" type="submit">\n              <span class="icon"><i class="fas fa-save" aria-hidden="true"></i></span>\n              <span>Update</span>\n            </button>\n          </form>\n        </td>\n        <td class="has-width-10">\n          <div class="field has-addons">\n            <div class="control">\n              <button class="button is-move-button" data-direction="up" type="button">\n                <span class="icon">\n                  <i class="fas fa-arrow-up" aria-hidden="true"></i>\n                </span>\n              </button>\n            </div>\n            <div class="control">\n              <button class="button is-move-button" data-direction="down" type="button">\n                <span class="icon">\n                  <i class="fas fa-arrow-down" aria-hidden="true"></i>\n                </span>\n              </button>\n            </div>\n          </div>\n        </td>\n        <td class="has-width-10">\n          <button class="button is-light is-danger is-delete-button" type="button">\n            <span class="icon">\n              <i class="fas fa-trash" aria-hidden="true"></i>\n            </span>\n          </button>\n        </td>`,l.querySelector('input[name="category"]').value=m.category;const v=l.querySelector('select[name="fontAwesomeIconClass-style');v.value=y[0],v.addEventListener("change",o);const f=l.querySelector('input[name="fontAwesomeIconClass-className"]');f.value=y[1].slice(3),f.addEventListener("keyup",r),a(f),null===(s=l.querySelector(`#${g}`))||void 0===s||s.addEventListener("submit",c);const p=l.querySelectorAll(".is-move-button");for(const e of p)e.addEventListener("click",i);null===(n=l.querySelector(".is-delete-button"))||void 0===n||n.addEventListener("click",d),u.append(l)}}null===(e=document.querySelector("#assetCategoryAdd--fontAwesomeIconClass-style"))||void 0===e||e.addEventListener("change",o),null===(t=document.querySelector("#assetCategoryAdd--fontAwesomeIconClass-className"))||void 0===t||t.addEventListener("keyup",r),a(document.querySelector("#assetCategoryAdd--fontAwesomeIconClass-style")),null===(s=document.querySelector("#form--assetCategoryAdd"))||void 0===s||s.addEventListener("submit",e=>{e.preventDefault();const t=e.currentTarget;cityssm.postJSON(`${n.urlPrefix}/admin/doAddAssetCategory`,e.currentTarget,e=>{var s;const n=e;n.success&&(l=null!==(s=n.assetCategories)&&void 0!==s?s:[],u(),t.reset())})}),u()})();