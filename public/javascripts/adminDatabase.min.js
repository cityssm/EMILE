"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e;const a=exports.Emile;let t=exports.backupFiles;function s(e){var s,l;const i=null!==(l=null===(s=e.currentTarget.closest("tr"))||void 0===s?void 0:s.dataset.fileName)&&void 0!==l?l:"";bulmaJS.confirm({title:"Delete Backup File",message:"Are you sure you want to delete this backed up database file?",contextualColorName:"warning",okButton:{text:"Yes, Delete Backup File",callbackFunction:function(){cityssm.postJSON(`${a.urlPrefix}/admin/doDeleteBackupFile`,{fileName:i},e=>{const a=e;a.success?(t=a.backupFiles,bulmaJS.alert({message:"Database backup deleted up successfully.",contextualColorName:"success"}),n()):bulmaJS.alert({title:"Error Deleting Backup File",message:"Please try again.",contextualColorName:"danger"})})}}})}function n(){var e,n;const l=document.querySelector("#container--backupFiles");if(0!==t.length){l.innerHTML='<table class="table is-fullwidth is-striped is-hoverable has-sticky-header">\n      <thead><tr>\n        <th>File Name</th>\n        <th>Last Modified</th>\n        <th class="has-text-right">File Size</th>\n        <th class="has-width-10"><span class="is-sr-only">Options</span></td>\n      </tr></thead>\n      <tbody></tbody>\n      </table>';for(const i of t){const t=document.createElement("tr");t.dataset.fileName=i.fileName,t.innerHTML=`<td>${i.fileName}</td>\n        <td>${i.lastModifiedTime}</td>\n        <td class="has-text-right">${i.sizeInMegabytes} MB</td>\n        <td>\n          <div class="field is-grouped">\n            <div class="control">\n              <a class="button is-link" href="${a.urlPrefix}/backups/${i.fileName}" download>\n                <span class="icon"><i class="fas fa-download" aria-hidden="true"></i></span>\n                <span>Download</span>\n              </a>\n            </div>\n            <div class="control">\n              <button class="button is-light is-danger is-delete-button" aria-label="Delete Backup">\n                <i class="fas fa-trash" aria-hidden="true"></i>\n              </button>\n            </div>\n          </div>\n        </td>`,null===(e=t.querySelector(".is-delete-button"))||void 0===e||e.addEventListener("click",s),null===(n=l.querySelector("tbody"))||void 0===n||n.append(t)}}else l.innerHTML='<div class="message is-info">\n        <p class="message-body">\n        <strong>There are no backup files in the application\'s backup folder.</strong><br />\n        Note that your systems administrator may be backing up the database in another way.\n        </p>\n        </div>'}null===(e=document.querySelector(".is-backup-button"))||void 0===e||e.addEventListener("click",()=>{bulmaJS.confirm({title:"Backup Database",message:"Are you sure you want to backup the application's database?",contextualColorName:"info",okButton:{text:"Yes, Backup Database",callbackFunction:function(){cityssm.postJSON(`${a.urlPrefix}/admin/doBackupDatabase`,{},e=>{const a=e;a.success?(t=a.backupFiles,bulmaJS.alert({message:"Database backed up successfully.",contextualColorName:"success"}),n()):bulmaJS.alert({title:"Error Backing Up Database",message:"Please try again.",contextualColorName:"danger"})})}}})}),bulmaJS.init(),n()})();