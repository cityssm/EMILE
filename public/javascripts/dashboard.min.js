"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e,a;const t=exports.Emile,n=document.querySelector("#container--dashboard"),s=document.querySelector("#form--dashboard");let l={};function i(e,a){return`${e}::${a}`}function d(e){return new Date(1e3*e).toLocaleString()}function r(e,a,t){e.data.labels.push(a);for(const a of e.data.datasets)a.data.push(t);e.update()}function o(){n.innerHTML='<p class="has-text-centered has-text-grey">\n      <i class="fas fa-pulse fa-spinner fa-4x" aria-hidden="true"></i><br />\n      Loading data...\n      </p>',cityssm.postJSON(`${t.urlPrefix}/dashboard/doGetEnergyData`,s,e=>{var a,t,s;const o=e;n.innerHTML="",l={};for(const e of o.energyData){const o=i(e.assetId,e.dataTypeId);if(void 0===l[o]){console.log(e);const i=document.createElement("div");i.className="panel",i.innerHTML=`<div class="panel-heading">\n              <div class="level is-mobile">\n                <div class="level-left">\n                  <div class="level-item">\n                    <i class="${null!==(a=e.fontAwesomeIconClasses)&&void 0!==a?a:"fas fa-bolt"}" aria-hidden="true"></i>\n                  </div>\n                  <div class="level-item">\n                    <h2 class="has-text-weight-bold" data-field="assetName"></h2>\n                  </div>\n                </div>\n                <div class="level-right">\n                  <div class="level-item">\n                    <span class="has-text-weight-normal" data-field="serviceCategory"></span>\n                  </div>\n                </div>\n              </div>\n              </div>\n              <div class="panel-block is-block">\n              <canvas style="max-height:400px"></canvas>\n              </div>`,i.querySelector('[data-field="assetName"]').textContent=null!==(t=e.assetName)&&void 0!==t?t:"",i.querySelector('[data-field="serviceCategory"]').textContent=null!==(s=e.serviceCategory)&&void 0!==s?s:"",n.append(i);const r=new Chart(i.querySelector("canvas"),{type:"bar",data:{labels:[d(e.timeSeconds)],datasets:[{label:e.unit,data:[e.dataValue*Math.pow(10,e.powerOfTenMultiplier)],borderWidth:1}]}});l[o]=r}else r(l[o],d(e.timeSeconds),e.dataValue*Math.pow(10,e.powerOfTenMultiplier))}})}t.initializeAssetSelector({assetSelectorElement:s.querySelector("#dashboard--assetSelector"),callbackFunction:o}),null===(e=s.querySelector("#dashboard--startDateString"))||void 0===e||e.addEventListener("change",o),null===(a=s.querySelector("#dashboard--endDateString"))||void 0===a||a.addEventListener("change",o),s.addEventListener("submit",e=>{e.preventDefault(),o()}),o()})();